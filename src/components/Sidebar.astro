---
import type { NavigationGroup } from "@data/navigation";

interface Props {
  items: NavigationGroup[];
  activeHref: string;
}

const { items, activeHref } = Astro.props;
---
<aside class="hidden w-72 border-r border-slate-200 bg-white px-4 py-6 shadow-sm md:block">
  <div class="flex items-center gap-3 px-2">
    <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-brand-500 text-white font-semibold">
      RS
    </div>
    <div>
      <p class="text-sm font-medium text-slate-500">Hotel Management</p>
      <p class="text-lg font-semibold text-slate-900">Rama Shinta</p>
    </div>
  </div>

  <nav class="mt-8 space-y-4">
    {items.map((group) => (
      <section class="space-y-2" data-group={group.name}>
        <p class="px-2 text-xs font-semibold uppercase tracking-wider text-slate-500">
          {group.name}
        </p>
        {group.children ? (
          <ul class="space-y-1">
            {group.children.map((item) => {
              const isActive = activeHref === item.href;
              return (
                <li>
                  <a
                    href={item.href}
                    class={`flex items-center justify-between rounded-lg px-3 py-2 text-sm font-medium transition hover:bg-brand-50 hover:text-brand-600 ${
                      isActive
                        ? "bg-brand-100 text-brand-700 shadow-inner"
                        : "text-slate-600"
                    }`}
                  >
                    <span>{item.name}</span>
                    <span class="rounded-full bg-slate-100 px-2 text-[11px] font-semibold text-slate-500">
                      {item.role.join(", ")}
                    </span>
                  </a>
                </li>
              );
            })}
          </ul>
        ) : (
          <a
            href={group.href ?? "/"}
            class={`mt-1 block rounded-lg px-3 py-2 text-sm font-semibold transition hover:bg-brand-50 hover:text-brand-600 ${
              activeHref === (group.href ?? "/")
                ? "bg-brand-100 text-brand-700 shadow-inner"
                : "text-slate-600"
            }`}
          >
            {group.name}
          </a>
        )}
      </section>
    ))}
  </nav>
</aside>
