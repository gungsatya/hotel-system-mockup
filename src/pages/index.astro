---
import AppLayout from "@layouts/AppLayout.astro";
import Card from "@components/ui/Card.astro";
import {
  reservationPipeline,
  staffingOverview,
  summaryCards,
  upcomingReservations
} from "@data/dashboard";
---
<AppLayout title="Dashboard">
  <section class="grid gap-4 sm:grid-cols-2 xl:grid-cols-4">
    {summaryCards.map((card) => (
      <Card class="relative overflow-hidden">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-slate-500">{card.title}</p>
            <p class="mt-2 text-3xl font-semibold text-slate-900">{card.value}</p>
          </div>
          <div
            class={`flex h-10 w-10 items-center justify-center rounded-full text-sm font-semibold ${
              card.trend === "up"
                ? "bg-green-100 text-green-600"
                : card.trend === "down"
                ? "bg-red-100 text-red-600"
                : "bg-slate-100 text-slate-600"
            }`}
          >
            {card.trend === "up" ? "↑" : card.trend === "down" ? "↓" : "→"}
          </div>
        </div>
        <p class="mt-3 text-xs font-medium uppercase tracking-widest text-slate-400">{card.change}</p>
      </Card>
    ))}
  </section>

  <section class="grid gap-4 lg:grid-cols-3">
    <Card
      title="Reservation pipeline"
      description="Overview of reservations by stage for the upcoming 7 days"
      class="lg:col-span-2"
    >
      <div class="grid gap-4 md:grid-cols-2">
        {reservationPipeline.map((stage) => (
          <div class="rounded-xl border border-slate-100 bg-slate-50 p-4">
            <p class="text-sm font-medium text-slate-500">{stage.stage}</p>
            <p class="mt-2 text-2xl font-semibold text-slate-900">{stage.value}</p>
            <div class="mt-3 h-2 rounded-full bg-slate-200">
              <div
                class="h-full rounded-full bg-brand-500"
                style={`width: ${Math.min(stage.value * 3, 100)}%`}
              />
            </div>
          </div>
        ))}
      </div>
    </Card>

    <Card title="Staffing overview" description="Key staffing highlights for today">
      <ul class="space-y-3 text-sm text-slate-600">
        <li class="flex items-center justify-between rounded-xl bg-slate-50 px-4 py-3">
          <span>Total employees</span>
          <span class="text-lg font-semibold text-slate-900">{staffingOverview.totalEmployees}</span>
        </li>
        <li class="flex items-center justify-between rounded-xl bg-slate-50 px-4 py-3">
          <span>On leave today</span>
          <span class="text-lg font-semibold text-amber-600">{staffingOverview.onLeaveToday}</span>
        </li>
        <li class="flex items-center justify-between rounded-xl bg-slate-50 px-4 py-3">
          <span>Pending approvals</span>
          <span class="text-lg font-semibold text-amber-600">{staffingOverview.pendingRequests}</span>
        </li>
      </ul>

      <div class="mt-6 space-y-3">
        <p class="text-xs font-semibold uppercase tracking-widest text-slate-400">Recent hires</p>
        <ul class="space-y-2 text-sm text-slate-600">
          {staffingOverview.recentHires.map((hire) => (
            <li class="flex items-center justify-between rounded-xl border border-slate-100 bg-white px-4 py-3">
              <div>
                <p class="font-semibold text-slate-900">{hire.name}</p>
                <p class="text-xs uppercase tracking-wider text-slate-400">{hire.position}</p>
              </div>
              <span class="text-xs font-medium text-slate-500">Start {hire.startDate}</span>
            </li>
          ))}
        </ul>
      </div>
    </Card>
  </section>

  <section class="grid gap-4 lg:grid-cols-3">
    <Card
      title="Upcoming stays"
      description="Guests arriving within the next 7 days"
      class="lg:col-span-2"
    >
      <div class="overflow-hidden rounded-xl border border-slate-100">
        <table class="min-w-full divide-y divide-slate-200 text-sm">
          <thead class="bg-slate-50 text-left text-xs font-semibold uppercase tracking-widest text-slate-500">
            <tr>
              <th class="px-4 py-3">Guest</th>
              <th class="px-4 py-3">Room</th>
              <th class="px-4 py-3">Check-in</th>
              <th class="px-4 py-3">Check-out</th>
              <th class="px-4 py-3 text-right">Status</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-100 bg-white text-slate-600">
            {upcomingReservations.map((reservation) => (
              <tr>
                <td class="px-4 py-3 font-medium text-slate-900">{reservation.guest}</td>
                <td class="px-4 py-3">{reservation.room}</td>
                <td class="px-4 py-3">{reservation.checkIn}</td>
                <td class="px-4 py-3">{reservation.checkOut}</td>
                <td class="px-4 py-3 text-right">
                  <span
                    class={`rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-widest ${
                      reservation.status === "Confirmed"
                        ? "bg-green-100 text-green-700"
                        : reservation.status === "Awaiting Payment"
                        ? "bg-amber-100 text-amber-700"
                        : "bg-blue-100 text-blue-700"
                    }`}
                  >
                    {reservation.status}
                  </span>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </Card>

    <Card title="Front office spotlight" description="Quick wins and alerts for today">
      <ul class="space-y-3 text-sm text-slate-600">
        <li class="rounded-xl border border-slate-200 bg-slate-50 px-4 py-3">
          <p class="font-semibold text-slate-900">VIP arrival at 14:00</p>
          <p class="text-xs text-slate-500">Prepare welcome amenities for Mr. I Gusti Rai.</p>
        </li>
        <li class="rounded-xl border border-slate-200 bg-slate-50 px-4 py-3">
          <p class="font-semibold text-slate-900">Pending room inspections</p>
          <p class="text-xs text-slate-500">6 rooms awaiting housekeeping sign-off.</p>
        </li>
        <li class="rounded-xl border border-slate-200 bg-slate-50 px-4 py-3">
          <p class="font-semibold text-slate-900">Restaurant pre-orders</p>
          <p class="text-xs text-slate-500">12 covers scheduled for tonight's set menu.</p>
        </li>
      </ul>
    </Card>
  </section>
</AppLayout>
